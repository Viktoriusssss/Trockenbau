<Window x:Class="ModernWPFApp.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Anmeldung - Bauverwaltung"
        Height="500"
        Width="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True">

    <Border Background="{DynamicResource MaterialDesignPaper}"
            CornerRadius="10"
            BorderThickness="1"
            BorderBrush="{DynamicResource MaterialDesignDivider}"
            materialDesign:ShadowAssist.ShadowDepth="Depth5">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0"
                    Background="{DynamicResource PrimaryHueMidBrush}"
                    CornerRadius="10,10,0,0"
                    Height="80">
                <Grid>
                    <StackPanel VerticalAlignment="Center"
                                HorizontalAlignment="Center">
                        <materialDesign:PackIcon Kind="AccountCircle"
                                                Foreground="White"
                                                Width="32"
                                                Height="32"/>
                        <TextBlock Text="Anmeldung"
                                  Foreground="White"
                                  FontSize="18"
                                  FontWeight="Medium"
                                  Margin="0,5,0,0"
                                  HorizontalAlignment="Center"/>
                    </StackPanel>
                    
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="8"
                            Click="CloseButton_Click"
                            Foreground="White">
                        <materialDesign:PackIcon Kind="Close" Width="16" Height="16"/>
                    </Button>
                </Grid>
            </Border>

            <!-- Content -->
            <StackPanel Grid.Row="1"
                        Margin="40,30"
                        VerticalAlignment="Center">
                
                <!-- Company Info -->
                <TextBlock Text="Bauverwaltungssystem"
                          FontSize="16"
                          FontWeight="SemiBold"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource MaterialDesignBody}"/>

                <!-- Username -->
                <TextBox x:Name="UsernameTextBox"
                         materialDesign:HintAssist.Hint="Benutzername"
                         materialDesign:HintAssist.IsFloating="True"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,10"
                         FontSize="14">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding LoginCommand}" CommandParameter="Enter"/>
                    </TextBox.InputBindings>
                </TextBox>

                <!-- Password -->
                <PasswordBox x:Name="PasswordBox"
                            materialDesign:HintAssist.Hint="Passwort"
                            materialDesign:HintAssist.IsFloating="True"
                            Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                            Margin="0,10"
                            FontSize="14"
                            PasswordChanged="PasswordBox_PasswordChanged">
                    <PasswordBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding LoginCommand}" CommandParameter="Enter"/>
                    </PasswordBox.InputBindings>
                </PasswordBox>

                <!-- Remember Me -->
                <CheckBox Content="Angemeldet bleiben"
                          IsChecked="{Binding RememberMe}"
                          Margin="0,15,0,0"
                          Style="{StaticResource MaterialDesignCheckBox}"/>

                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}"
                          Foreground="{DynamicResource ValidationErrorBrush}"
                          FontSize="12"
                          Margin="0,10,0,0"
                          TextWrapping="Wrap"
                          Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Login Button -->
                <Button Command="{Binding LoginCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Margin="0,20,0,0"
                        Height="40"
                        FontSize="14"
                        FontWeight="Medium"
                        IsEnabled="{Binding IsLoggingIn, Converter={StaticResource InverseBooleanConverter}}">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal">
                            <ProgressBar Width="16"
                                        Height="16"
                                        Margin="0,0,8,0"
                                        Style="{StaticResource MaterialDesignCircularProgressBar}"
                                        Value="0"
                                        IsIndeterminate="True"
                                        Visibility="{Binding IsLoggingIn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                            <TextBlock Text="ANMELDEN"
                                      Visibility="{Binding IsLoggingIn, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                            <TextBlock Text="ANMELDEN..."
                                      Visibility="{Binding IsLoggingIn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        </StackPanel>
                    </Button.Content>
                </Button>

            </StackPanel>

            <!-- Footer -->
            <Border Grid.Row="2"
                    Background="{DynamicResource MaterialDesignCardBackground}"
                    CornerRadius="0,0,10,10"
                    BorderThickness="0,1,0,0"
                    BorderBrush="{DynamicResource MaterialDesignDivider}"
                    Height="50">
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center">
                    <TextBlock Text="Demo Benutzer: admin/manager/employee | Passwort: password"
                              FontSize="10"
                              Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                </StackPanel>
            </Border>

        </Grid>
    </Border>
</Window>
